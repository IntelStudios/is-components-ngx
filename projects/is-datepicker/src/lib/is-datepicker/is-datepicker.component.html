<div class="input-group" [class.readonly]="readonly" [class.open]="isOpen" [class.disabled]="disabled">
  <!-- readonly on input itself when mask is off since it breaks keyboard input -->
  <input #input
    class="datepicker-input datepicker-value form-control align-{{alignment}}"
    [class.clearable]="allowClear"
    [value]="dateValue | date:viewFormat"
    [formControl]="dateControl"
    [mask]="mask"
    [showMaskTyped]="!!mask"
    (keyup)="onInputValueChange($event)"
    (click)="onInputClick()"
    [class.disabled]="disabled"
    [readonly]="!mask || disabled || readonly"
    [class.readonly]="readonly"
  >
  <div class="input-group-append">
    <i *ngIf="allowClear"
       [class.shown]="!disabled && (input.value || dateValue)"
       class="fas fa-times btn-remove"
       (click)="onRemove($event)"></i>
    <span class="datepicker-icon" [class.disabled]="disabled" (click)="openPopup()">
      <i class="fas fa-calendar-alt fa-fw"></i>
    </span>
  </div>
</div>
